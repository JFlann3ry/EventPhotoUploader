{% extends "base.html" %}
{% block title %}Gallery - {{ selected_event.name if selected_event else "No Event" }}{% endblock %}
{% block content %}
<link rel="stylesheet" href="/static/css/gallery.css">
<link rel="stylesheet" href="/static/css/slideshow.css">
<div class="gallery-page">
    <div class="container">
        {% if events|length > 1 %}
            <!-- ... event selection form ... -->
        {% endif %}
        <h2>
            <!-- ... event name ... -->
        </h2>
        {% if files %}
        <a href="/auth/download-all">Download All Photos</a>
        <div id="gallery" class="gallery-container">
            <!-- Photos will be dynamically loaded here -->
        </div>
        <div id="loading" class="loading" style="display: none;">Loading more photos...</div>
        {% else %}
            <p>No photos or videos found for this event.</p>
        {% endif %}
        <a href="/auth/profile">Back to Profile</a>
    </div>
</div>

<!-- Modal Structure -->
<div id="modal" class="modal">
    <!-- ... modal content ... -->
</div>

<!-- ADD MASONRY LIBRARY -->
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<!-- ADD IMAGESLOADED (Recommended by Masonry for reliability) -->
<script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>

<script src="/static/js/gallery.js"></script>
<script src="/static/js/slideshow.js"></script>
{% endblock %}