{% extends "base.html" %}
{% block title %}Upload Photos for Event{% endblock %}
{% block content %}
<div class="container">
    <h2>Upload Your Photos</h2>
    {% if success %}
        <p style="color:green;">Upload successful!</p>
    {% endif %}
    <form method="post" enctype="multipart/form-data" id="uploadForm">
        <label for="guest_email">Your Email:</label>
        <input type="email" name="guest_email" required><br><br>

        <input type="hidden" name="guest_device" id="guest_device">

        <label for="file_upload">Select Photos:</label>
        <input type="file" name="file_upload" multiple required><br><br>

        <button type="submit">Upload</button>
    </form>
    <!-- Progress bar container -->
    <div class="progress" id="progressContainer" style="display: none; margin-top: 15px;">
        <div class="progress-bar" id="progressBar" style="height: 20px; background-color: #0077cc; width: 0%;"></div>
    </div>
    <!-- Success message placeholder -->
    <div id="uploadSuccess" style="display: none; color: green; margin-top: 10px;">
        Upload successful!
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Device info detection already present:
    function getDeviceInfo() {
        const userAgent = navigator.userAgent;
        let device = "Unknown";
        if (/Android/.test(userAgent)) {
            device = "Android";
        } else if (/iPhone|iPad|iPod/.test(userAgent)) {
            device = "iOS";
        } else if (/Windows/.test(userAgent)) {
            device = "Windows";
        } else if (/Macintosh/.test(userAgent)) {
            device = "Macintosh";
        } else if (/Linux/.test(userAgent)) {
            device = "Linux";
        }
        return device + " - " + userAgent;
    }
    document.getElementById('guest_device').value = getDeviceInfo();
});
</script>
{% endblock %}
